# TopoDiscovery 使用说明

本程序用于测量给定网络的拓扑连接情况，可用于下面三种场景：

1. 测量两点之间的网络连接情况
2. 测量一点到多点之间的连接情况
3. 测量多点到多点之间的连接情况

使用方法如下。

## 准备工作

1. 在项目文件夹中找到 `ip_list` 文件夹中的 `inet_ip_list.txt` 文件，用任意文本编辑器打开即可
2. 将需要测量的 IP 地址或者主机绑定的域名写入该文件中，每行一个（这些地址就是测量时使用的目的地址）
3. 双击 `topoDiscovery.exe` 运行即可

## 1. 测量两点之间的网络连接情况

1. 在文本中填写 IP 地址时写入**一个**目的地址即可
2. **运行程序之后输入字符 1 即可**
3. 等待程序运行结束（命令行中会实时输出运行情况），待程序运行结束，关闭程序窗口
4. 测量结果在 result 文件夹中，分别为一个运行日志文件，一个拓扑结果图和一个字典结构的原始数据

## 2. 测量一点到多点之间的连接情况

1. 在文本中填写 IP 地址时写入**多个**目的地址即可
2. **运行程序之后输入字符 1 即可**
3. 等待程序运行结束（命令行中会实时输出运行情况），待程序运行结束，关闭程序窗口
4. 测量结果在 result 文件夹中，分别为一个运行日志文件，一个拓扑结果图和一个字典结构的原始数据

## 3. 测量多点到多点之间的连接情况

> 涉及到多个源主机的情况，可以将程序放在 U 盘中运行

1. 选择一个源主机
2. 在文本中填写 IP 地址时**写入该源主机需要测量的多个目的地址**
3. **运行程序之后输入字符 2，收集该主机到其他主机的路由情况**，路由信息在文件夹 `RawTopoData` 中
4. 重复进行 1-3 即可，确保所有路由信息都保存在  `RawTopoData` 中即可
5. **再次运行程序，此时输入字符 3，使用所有的路由信息计算网络拓扑**，待程序运行结束，关闭程序窗口
6. 测量结果在 result 文件夹中，分别为一个运行日志文件，一个拓扑结果图和一个字典结构的原始数据

## 结果说明

result.png，拓扑结构图：

- 图中的点表示网络中的主机或者路由设备，每个点用其 IP 地址标识
- 边表示两点之间存在逻辑链路

result.gml，原始拓扑数据：

- 当图中的点或者边过于密集时，可以通过查看该文件获得网络的准确连接情况

tr_xxx.log，日志文件：

- 记录了程序运行过程中的状态，用于 DEBUG

## 注意

- 运行程序时需要初始化运行环境，因此需要等待约 20 秒，之后命令行界面就会有输出，是正常现象
- 本程序在 windwos7 和windows10 系统中都进行了测试，得到了正确的结果，但依然可能存在其他的兼容性问题
- 由于网络环境的变化或者设备防火墙策略等网络问题的存在，本程序给出的拓扑仅供参考